{"ast":null,"code":"import _toConsumableArray from\"C:/Users/User/Desktop/Nicol\\xE1s/Rafaela/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/User/Desktop/Nicol\\xE1s/Rafaela/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import'bootstrap/dist/css/bootstrap.css';import'../styles.css';import{Card,CardImg,CardBody,CardTitle,CardSubtitle,Button,Col,Row}from'reactstrap';import{TotalAmountContext,CartContentContext}from'../elements/cartContent.js';import{handcraftsList}from'../elements/handcraftsList.js';import{passToCommaFormat,useResponsiveTools}from'../elements/someFunctions.js';import{SocialNetworks}from'./SocialNetworks.js';import{Link as ReactLink}from'react-router-dom';import{getCartContent}from'../elements/cartContent.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Article=function Article(props){var _useState=useState(9999),_useState2=_slicedToArray(_useState,2),currentKey=_useState2[0],getKey=_useState2[1];var newKey=function newKey(){return getKey(currentKey+1);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Card,{height:\"50px\",width:\"50px\",children:[/*#__PURE__*/_jsx(CardImg,{alt:\"illustrative_image\",src:props.imageSource}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(CardTitle,{className:\"text-dark\",tag:\"h5\",children:props.title}),/*#__PURE__*/_jsxs(CardSubtitle,{className:\"mb-2 text-muted\",tag:\"h6\",children:[\"$\",props.priceInt,\",\",props.priceDecimal,\" por unidad\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:props.amount}),/*#__PURE__*/_jsxs(\"span\",{className:\"input-group-text total-local\",children:[\"$\",props.localPrice]})]},newKey)]})]})});};var SetOfButtons=function SetOfButtons(props){return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-set-of-buttons\",children:[/*#__PURE__*/_jsx(ReactLink,{to:process.env.REACT_APP_FOR_PATH+\"/products\",className:\"btn btn-secondary\",children:\"Return to catalogue\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"input-group-text side-margins multiline\",children:[\"Total: $\",props.totalPrice]}),/*#__PURE__*/_jsx(Button,{className:\"disabled\",onClick:function onClick(){},children:\"Continue\"})]},'orderButtons');};var HaveContentInCart=function HaveContentInCart(props){var priceToCommaFormat=function priceToCommaFormat(amount,priceInt,priceDecimal){var priceWithDot=typeof amount==='undefined'?props.totalPrice:Math.round(amount*Number(priceInt+'.'+priceDecimal)*100)/100;return passToCommaFormat(priceWithDot);};var _useResponsiveTools=useResponsiveTools(),windowWidth=_useResponsiveTools.windowWidth;return/*#__PURE__*/_jsxs(\"div\",{className:\"content-in-cart\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(SetOfButtons,{totalPrice:priceToCommaFormat()},0),/*#__PURE__*/_jsx(\"br\",{}),[props.content].map(function(row){return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(Row,{children:row.map(function(handcraft){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Col,{sm:windowWidth>1260?'3':windowWidth<=1260&&windowWidth>660?'4':windowWidth<=660&&'6',className:\"horizontal-margin\",children:/*#__PURE__*/_jsx(Article,{refe:handcraft[5],title:handcraft[0],subtitle:handcraft[2],imageSource:handcraft[1],description:handcraft[3],amount:handcraft[6],priceInt:handcraft[7],priceDecimal:handcraft[8],localPrice:priceToCommaFormat(handcraft[6],handcraft[7],handcraft[8])})})},handcraft[4]);})})},row[0][4]+row[0][4]);})]},'haveContentInCart');};var NoContentInCart=function NoContentInCart(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Cart is still empty\"}),/*#__PURE__*/_jsx(\"div\",{className:\"right-oriented\",children:/*#__PURE__*/_jsx(ReactLink,{type:\"button\",to:process.env.REACT_APP_FOR_PATH+\"/products\",replace:true,className:\"btn btn-secondary\",children:\"To the catalogue!\"})})]},'noContentInCart');};// const useRefresher = () => {\n//     const [anyValue, setAnyValue] = useState(0);\n//     return { anyValue, setAnyValue };\n// }\nexport var Cart=function Cart(){var _useContext=useContext(TotalAmountContext),setTotalAmount=_useContext.setTotalAmount;var _useContext2=useContext(CartContentContext),cartContent=_useContext2.cartContent;// const [handcrafts, setHandcrafts] = useState(handcraftsList);\n//     console.log(handcrafts);\n// console.log(cartContent);\n// const updatedCartContent = getCartContent();\nsetTotalAmount(Object.values(cartContent).reduce(function(previousValue,currentValue){return previousValue+currentValue;},0));var updatedCartAmounts=Object.values(cartContent);// console.log(updatedCartAmounts);\n// console.log(updatedCartAmounts.slice(0, 3));\nvar value=0;// * 0 + updatedCartAmounts[value++]\n// const localHandcraftsList = handcraftsList;\nvar updatedHandcraftsList=handcraftsList.map(function(el){return[].concat(_toConsumableArray(el.slice(0,6)),[el[6]*0+updatedCartAmounts[value++]],_toConsumableArray(el.slice(7)));});console.log(updatedHandcraftsList);var onlyHandcraftsInCart=updatedHandcraftsList.filter(function(el){return el[6]>0;});var localPrices=onlyHandcraftsInCart.map(function(el){return el[6]*Number(el[7]+'.'+el[8]);});var totalPrice=localPrices.reduce(function(previousValue,currentValue){return previousValue+currentValue;},0);/*\r\n    importar objeto con contenido de carrito\r\n    volverlo array\r\n    importar array de artesanías y crear copia local\r\n    por cada par del array exobjeto (clave, valor), ponerle ese valor al [6] del array\r\n    conectar cables con viejo código\r\n    */ // sessionStorage.setItem('refresh-cart-page', 'true');\n// const [refreshOnce, setRefresh] = useState(shouldRefreshCartPage === 'true' ? true : false);\n// useEffect(() => {\n// const shouldRefreshCartPage = sessionStorage.getItem('force-cart-page-rendering');\n// const refreshCartPage = () => {\n//     sessionStorage.setItem('force-cart-page-rendering', 'false');\n//     // document.location.reload();\n// }\n// const doNotRefreshCartPage = () => {\n//     // return () => window.addEventListener('load', function () {\n//     sessionStorage.setItem('force-cart-page-rendering', 'true');\n//     // });\n//     // return () => window.removeEventListener('load', function () {\n//     //     sessionStorage.setItem('force-cart-page-rendering', 'true');\n//     // });\n// }\n// sessionStorage.setItem('force-cart-page-rendering', true);\n// useEffect(() => {\n//     // document.location.reload();\n//     sessionStorage.getItem('force-cart-page-rendering') === 'false' ?\n//         doNotRefreshCartPage() :\n//         // typeof(sessionStorage.getItem('force-cart-page-rendering')) === 'undefined' ?\n//         refreshCartPage();\n// }, [])\n// const whetherToReloadPage = sessionStorage.getItem('force-cart-page-rendering');\n// // const [reload, setReload] = useState(whetherToReloadPage === 'true' ? true : false);\n// const reloadPage = useCallback(() => {\n//     document.location.reload();\n// }, [whetherToReloadPage])\n/*\r\n    \r\n        useEffect(() => {\r\n            const refreshCartPage = () => {\r\n                sessionStorage.setItem('force-cart-page-rendering', 'false');\r\n                document.location.reload();\r\n            }\r\n            const doNotRefreshCartPage = () => {\r\n                window.addEventListener('load', function () {\r\n                    sessionStorage.setItem('force-cart-page-rendering', 'true');\r\n                });\r\n                // return () => window.removeEventListener('load', function () {\r\n                //     sessionStorage.setItem('force-cart-page-rendering', 'true');\r\n                // });\r\n            }\r\n            // sessionStorage.setItem('force-cart-page-rendering', true);\r\n            sessionStorage.getItem('force-cart-page-rendering') === 'false' ?\r\n                doNotRefreshCartPage() :\r\n                // typeof(sessionStorage.getItem('force-cart-page-rendering')) === 'undefined' ?\r\n                refreshCartPage();\r\n        }, [])\r\n    */ // useRefresher();\n// alert('Recarga disparada');\n// }, []);\n// const { anyValue, setAnyValue } = useRefresher();\n// const runRefresher = () => {\n//     setAnyValue(anyValue + 1);\n// }\n// window.addEventListener('load', function () {\n//     runRefresher();\n// })\n// return useCallback(() => {\nconsole.log('LLamado por fuera del return');return/*#__PURE__*/_jsxs(\"div\",{className:\"background\",children:[console.log('Componente llamado'),onlyHandcraftsInCart.length>0?/*#__PURE__*/_jsx(HaveContentInCart,{content:onlyHandcraftsInCart,totalPrice:totalPrice}):/*#__PURE__*/_jsx(NoContentInCart,{}),/*#__PURE__*/_jsx(SocialNetworks,{})]});// }, [onlyHandcraftsInCart, totalPrice])\n// const RenderIt = () => {\n//     sessionStorage.setItem('force-cart-page-rendering', 'true');\n//     return (\n//         <div className='background'>\n//             {/* {sessionStorage.setItem('force-cart-page-rendering', 'true')} */}\n//             {/* {runRefresher} */}\n//             {/* {console.log(onlyHandcraftsInCart)}\n//             {console.log(cartContent)} */}\n//             {\n//                 onlyHandcraftsInCart.length > 0 ?\n//                     <HaveContentInCart\n//                         content={onlyHandcraftsInCart}\n//                         totalPrice={totalPrice} /> :\n//                     <NoContentInCart />\n//             }\n//             <SocialNetworks />\n//         </div>\n//     )\n// }\n// const refreshIt = () => {\n//     console.log('Refresher activated')\n//     document.location.reload();\n// }\n// const checkerTwo = () => {\n//     sessionStorage.setItem('force-cart-page-rendering', 'false');\n//     console.log('Checker two');\n// }\n// const checkerOne = () => {\n//     sessionStorage.setItem('force-cart-page-rendering', 'true');\n//     console.log('Checker one');\n// }\n// !sessionStorage.getItem('force-cart-page-rendering') ?\n//     checkerOne() :\n//     checkerTwo();\n// return sessionStorage.getItem('force-cart-page-rendering') === 'true' ?\n//     refreshIt() :\n//     RenderIt();\n};","map":{"version":3,"sources":["C:/Users/User/Desktop/Nicolás/Rafaela/my-app/client/src/components/Cart.js"],"names":["React","useState","useContext","Card","CardImg","CardBody","CardTitle","CardSubtitle","Button","Col","Row","TotalAmountContext","CartContentContext","handcraftsList","passToCommaFormat","useResponsiveTools","SocialNetworks","Link","ReactLink","getCartContent","Article","props","currentKey","getKey","newKey","imageSource","title","priceInt","priceDecimal","amount","localPrice","SetOfButtons","process","env","REACT_APP_FOR_PATH","totalPrice","HaveContentInCart","priceToCommaFormat","priceWithDot","Math","round","Number","windowWidth","content","map","row","handcraft","NoContentInCart","Cart","setTotalAmount","cartContent","Object","values","reduce","previousValue","currentValue","updatedCartAmounts","value","updatedHandcraftsList","el","slice","console","log","onlyHandcraftsInCart","filter","localPrices","length"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport '../styles.css';\r\nimport {\r\n    Card, CardImg, CardBody, CardTitle, CardSubtitle, Button, Col, Row\r\n} from 'reactstrap';\r\nimport { TotalAmountContext, CartContentContext } from '../elements/cartContent.js';\r\nimport { handcraftsList } from '../elements/handcraftsList.js';\r\nimport { passToCommaFormat, useResponsiveTools } from '../elements/someFunctions.js';\r\nimport { SocialNetworks } from './SocialNetworks.js';\r\nimport { Link as ReactLink } from 'react-router-dom';\r\nimport { getCartContent } from '../elements/cartContent.js';\r\n\r\nconst Article = (props) => {\r\n    const [currentKey, getKey] = useState(9999);\r\n    const newKey = () => getKey(currentKey + 1);\r\n    return (\r\n        <div>\r\n            <Card height='50px' width='50px'>\r\n                <CardImg\r\n                    alt=\"illustrative_image\"\r\n                    src={props.imageSource} />\r\n                <CardBody>\r\n                    <CardTitle className=\"text-dark\" tag=\"h5\">\r\n                        {props.title}\r\n                    </CardTitle>\r\n                    <CardSubtitle\r\n                        className=\"mb-2 text-muted\"\r\n                        tag=\"h6\" >\r\n                        ${props.priceInt},{props.priceDecimal} por unidad\r\n                    </CardSubtitle>\r\n                    <div key={newKey} className=\"input-group mb-3\">\r\n                        <span className=\"input-group-text\">{props.amount}</span>\r\n                        <span className=\"input-group-text total-local\">\r\n                            ${props.localPrice}\r\n                        </span>\r\n                    </div>\r\n                </CardBody>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst SetOfButtons = (props) => {\r\n    return (\r\n        <div className='cart-set-of-buttons' key='orderButtons'>\r\n            <ReactLink to={process.env.REACT_APP_FOR_PATH + \"/products\"} className='btn btn-secondary'>\r\n                Return to catalogue\r\n            </ReactLink>\r\n            <span className=\"input-group-text side-margins multiline\">\r\n                Total: ${props.totalPrice}\r\n            </span>\r\n            <Button className='disabled' onClick={() => { }}>\r\n                Continue\r\n            </Button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst HaveContentInCart = (props) => {\r\n    const priceToCommaFormat = (amount, priceInt, priceDecimal) => {\r\n        const priceWithDot = typeof amount === 'undefined' ?\r\n            props.totalPrice :\r\n            Math.round(amount * Number(\r\n                priceInt + '.' + priceDecimal\r\n            ) * 100) / 100;\r\n        return passToCommaFormat(priceWithDot);\r\n    }\r\n    const { windowWidth } = useResponsiveTools();\r\n    return (\r\n        <div className='content-in-cart' key='haveContentInCart'>\r\n            <br></br>\r\n            <br></br>\r\n            <br></br>\r\n            <SetOfButtons key={0} totalPrice={priceToCommaFormat()} />\r\n            <br></br>\r\n            {[props.content].map((row) =>\r\n                <div className='container-fluid' key={row[0][4] + row[0][4]}>\r\n                    <Row>\r\n                        {row.map((handcraft) => (\r\n                            <React.Fragment key={handcraft[4]}>\r\n                                <Col sm={\r\n                                    windowWidth > 1260 ? '3' :\r\n                                        windowWidth <= 1260 && windowWidth > 660 ? '4' :\r\n                                            windowWidth <= 660 && '6'}\r\n                                    className='horizontal-margin'>\r\n                                    <Article\r\n                                        refe={handcraft[5]}\r\n                                        title={handcraft[0]}\r\n                                        subtitle={handcraft[2]}\r\n                                        imageSource={handcraft[1]}\r\n                                        description={handcraft[3]}\r\n                                        amount={handcraft[6]}\r\n                                        priceInt={handcraft[7]}\r\n                                        priceDecimal={handcraft[8]}\r\n                                        localPrice={priceToCommaFormat(\r\n                                            handcraft[6], handcraft[7], handcraft[8])} />\r\n                                </Col>\r\n                            </React.Fragment>\r\n                        ))}\r\n                    </Row>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst NoContentInCart = () => {\r\n    return (\r\n        <div key='noContentInCart' className='App-header'>\r\n            <h1>Cart is still empty</h1>\r\n            <div className=\"right-oriented\">\r\n                <ReactLink type='button' to={process.env.REACT_APP_FOR_PATH + \"/products\"} replace className='btn btn-secondary'>\r\n                    To the catalogue!\r\n                </ReactLink>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// const useRefresher = () => {\r\n//     const [anyValue, setAnyValue] = useState(0);\r\n//     return { anyValue, setAnyValue };\r\n// }\r\n\r\nexport const Cart = () => {\r\n    const { setTotalAmount } = useContext(TotalAmountContext);\r\n    const { cartContent } = useContext(CartContentContext);\r\n    // const [handcrafts, setHandcrafts] = useState(handcraftsList);\r\n    //     console.log(handcrafts);\r\n    // console.log(cartContent);\r\n    // const updatedCartContent = getCartContent();\r\n    setTotalAmount(Object.values(cartContent).reduce(\r\n        (previousValue, currentValue) => previousValue + currentValue,\r\n        0\r\n    ));\r\n    const updatedCartAmounts = Object.values(cartContent);\r\n    // console.log(updatedCartAmounts);\r\n\r\n    // console.log(updatedCartAmounts.slice(0, 3));\r\n    let value = 0;\r\n    // * 0 + updatedCartAmounts[value++]\r\n    // const localHandcraftsList = handcraftsList;\r\n    const updatedHandcraftsList = handcraftsList.map((el) => [\r\n        ...el.slice(0, 6),\r\n        el[6] * 0 + updatedCartAmounts[value++],\r\n        ...el.slice(7)\r\n    ]);\r\n    console.log(updatedHandcraftsList);\r\n\r\n\r\n    const onlyHandcraftsInCart = updatedHandcraftsList.filter((el) => el[6] > 0);\r\n    const localPrices = onlyHandcraftsInCart.map((el) => el[6] * Number(el[7] + '.' + el[8]));\r\n    const totalPrice = localPrices.reduce(\r\n        (previousValue, currentValue) => previousValue + currentValue,\r\n        0\r\n    );\r\n    /*\r\n    importar objeto con contenido de carrito\r\n    volverlo array\r\n    importar array de artesanías y crear copia local\r\n    por cada par del array exobjeto (clave, valor), ponerle ese valor al [6] del array\r\n    conectar cables con viejo código\r\n    */\r\n\r\n    // sessionStorage.setItem('refresh-cart-page', 'true');\r\n    // const [refreshOnce, setRefresh] = useState(shouldRefreshCartPage === 'true' ? true : false);\r\n    // useEffect(() => {\r\n    // const shouldRefreshCartPage = sessionStorage.getItem('force-cart-page-rendering');\r\n\r\n\r\n    // const refreshCartPage = () => {\r\n    //     sessionStorage.setItem('force-cart-page-rendering', 'false');\r\n    //     // document.location.reload();\r\n    // }\r\n    // const doNotRefreshCartPage = () => {\r\n    //     // return () => window.addEventListener('load', function () {\r\n    //     sessionStorage.setItem('force-cart-page-rendering', 'true');\r\n\r\n    //     // });\r\n\r\n    //     // return () => window.removeEventListener('load', function () {\r\n    //     //     sessionStorage.setItem('force-cart-page-rendering', 'true');\r\n    //     // });\r\n    // }\r\n    // sessionStorage.setItem('force-cart-page-rendering', true);\r\n    // useEffect(() => {\r\n    //     // document.location.reload();\r\n\r\n    //     sessionStorage.getItem('force-cart-page-rendering') === 'false' ?\r\n    //         doNotRefreshCartPage() :\r\n    //         // typeof(sessionStorage.getItem('force-cart-page-rendering')) === 'undefined' ?\r\n    //         refreshCartPage();\r\n    // }, [])\r\n    // const whetherToReloadPage = sessionStorage.getItem('force-cart-page-rendering');\r\n    // // const [reload, setReload] = useState(whetherToReloadPage === 'true' ? true : false);\r\n    // const reloadPage = useCallback(() => {\r\n\r\n    //     document.location.reload();\r\n\r\n    // }, [whetherToReloadPage])\r\n\r\n\r\n    /*\r\n    \r\n        useEffect(() => {\r\n            const refreshCartPage = () => {\r\n                sessionStorage.setItem('force-cart-page-rendering', 'false');\r\n                document.location.reload();\r\n            }\r\n            const doNotRefreshCartPage = () => {\r\n                window.addEventListener('load', function () {\r\n                    sessionStorage.setItem('force-cart-page-rendering', 'true');\r\n                });\r\n                // return () => window.removeEventListener('load', function () {\r\n                //     sessionStorage.setItem('force-cart-page-rendering', 'true');\r\n                // });\r\n            }\r\n            // sessionStorage.setItem('force-cart-page-rendering', true);\r\n            sessionStorage.getItem('force-cart-page-rendering') === 'false' ?\r\n                doNotRefreshCartPage() :\r\n                // typeof(sessionStorage.getItem('force-cart-page-rendering')) === 'undefined' ?\r\n                refreshCartPage();\r\n        }, [])\r\n    */\r\n\r\n    // useRefresher();\r\n    // alert('Recarga disparada');\r\n    // }, []);\r\n    // const { anyValue, setAnyValue } = useRefresher();\r\n    // const runRefresher = () => {\r\n    //     setAnyValue(anyValue + 1);\r\n    // }\r\n    // window.addEventListener('load', function () {\r\n    //     runRefresher();\r\n    // })\r\n    // return useCallback(() => {\r\n    console.log('LLamado por fuera del return');\r\n    return (\r\n        <div className='background'>\r\n            {console.log('Componente llamado')}\r\n            {/* {sessionStorage.setItem('force-cart-page-rendering', 'true')} */}\r\n            {/* {runRefresher} */}\r\n            {/* {console.log(onlyHandcraftsInCart)}\r\n                {console.log(cartContent)} */}\r\n            {\r\n                onlyHandcraftsInCart.length > 0 ?\r\n                    <HaveContentInCart\r\n                        content={onlyHandcraftsInCart}\r\n                        totalPrice={totalPrice} /> :\r\n                    <NoContentInCart />\r\n            }\r\n            <SocialNetworks />\r\n        </div>\r\n    )\r\n    // }, [onlyHandcraftsInCart, totalPrice])\r\n\r\n\r\n    // const RenderIt = () => {\r\n    //     sessionStorage.setItem('force-cart-page-rendering', 'true');\r\n    //     return (\r\n    //         <div className='background'>\r\n    //             {/* {sessionStorage.setItem('force-cart-page-rendering', 'true')} */}\r\n    //             {/* {runRefresher} */}\r\n    //             {/* {console.log(onlyHandcraftsInCart)}\r\n    //             {console.log(cartContent)} */}\r\n    //             {\r\n    //                 onlyHandcraftsInCart.length > 0 ?\r\n    //                     <HaveContentInCart\r\n    //                         content={onlyHandcraftsInCart}\r\n    //                         totalPrice={totalPrice} /> :\r\n    //                     <NoContentInCart />\r\n    //             }\r\n    //             <SocialNetworks />\r\n    //         </div>\r\n    //     )\r\n    // }\r\n\r\n    // const refreshIt = () => {\r\n    //     console.log('Refresher activated')\r\n    //     document.location.reload();\r\n    // }\r\n\r\n    // const checkerTwo = () => {\r\n    //     sessionStorage.setItem('force-cart-page-rendering', 'false');\r\n    //     console.log('Checker two');\r\n    // }\r\n\r\n    // const checkerOne = () => {\r\n    //     sessionStorage.setItem('force-cart-page-rendering', 'true');\r\n    //     console.log('Checker one');\r\n    // }\r\n\r\n    // !sessionStorage.getItem('force-cart-page-rendering') ?\r\n    //     checkerOne() :\r\n    //     checkerTwo();\r\n    // return sessionStorage.getItem('force-cart-page-rendering') === 'true' ?\r\n    //     refreshIt() :\r\n    //     RenderIt();\r\n}\r\n"]},"metadata":{},"sourceType":"module"}